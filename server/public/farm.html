<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Real Price BTC Game</title>
<link rel="stylesheet" href="css/styles.css" />
<script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body class="safe-bottom">
<h1 class="sr-only">Real Price BTC Game</h1>
<button class="back-text" id="backText">Назад</button>
<div class="tabs row" style="margin-top:0">
  <button class="tab btn btn-primary" data-type="usd">Фарм $</button>
  <button class="tab btn btn-ghost" data-type="vop">Фарм VOP</button>
</div>

<section class="card claim-card" id="statusCard">
  <div class="claim-top row" style="justify-content:space-between;align-items:center">
    <div class="claim-amount">Доступно к получению: <b id="claimAmount">$0</b></div>
    <button class="btn btn-success" id="btnClaim" disabled>CLAIM</button>
  </div>
  <div class="metrics row">
    <div class="col"><div class="label">Скорость</div><div class="val" id="rate">0 $/ч</div></div>
    <div class="col"><div class="label">FP</div><div class="val" id="fp">0</div></div>
  </div>
  <div class="cap">
    <div class="cap-row row" style="justify-content:space-between"><span>Лимит сегодня</span><span id="capText">$0 / $0</span></div>
    <div class="progress success"><div class="bar" id="capBar" style="width:0%"></div></div>
    <div class="muted">Оффлайн-лимит: до 12 ч</div>
  </div>
  <div class="banner warn" id="inactiveBanner" hidden>
    Чтобы активировать фарм, сделай ставку от $50 за 24 часа
    <button class="btn btn-secondary" id="goPlay">Играть</button>
  </div>
</section>

<section class="card upgrades-card" id="upgradesCard">
  <h3>Апгрейды</h3>
  <div class="grid-2" id="upgrades"></div>
</section>

<script src="js/farm.js"></script>
<script>
  initFarmPage();
  const backText = document.getElementById('backText');
  backText.addEventListener('click',()=>{
    if(history.length>1) history.back(); else location.href='/';
  });
  if(window.Telegram?.WebApp?.BackButton){
    Telegram.WebApp.BackButton.show();
    Telegram.WebApp.onEvent('backButtonClicked',()=>{
      if(history.length>1) history.back(); else location.href='/';
    });
  }
</script>
</body>
</html>

